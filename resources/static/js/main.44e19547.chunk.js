(window["webpackJsonpblacklist-widget"]=window["webpackJsonpblacklist-widget"]||[]).push([[0],{114:function(e){e.exports=JSON.parse('{"entities":{"blacklist":{"name":"","noItems":"","deleteDialog":{"title":"","description":""}}},"error":{"dataLoading":""},"common":{"dataDeleted":"","delete":"","yes":"","no":"","notAuthenticated":"","loadingMore":""},"filters":{"field":"","operator":"","addFilter":"","clearFilters":"","filter":""},"pagination":{"ariaLabels":{"firstPage":"","previousPage":"","nextPage":"","lastPage":""}}}')},115:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Error during server connection"},"common":{"couldNotFetchData":"Unfortunately we could not fetch entity data","notAuthenticated":"User is not authenticated.","loadingMore":"Loading more...","download":"Download file","dataDeleted":"Blacklist successfully deleted","yes":"Yes","no":"No","delete":""},"pagination":{"ariaLabels":{"firstPage":"first page","previousPage":"previous page","nextPage":"next page","lastPage":"last page"}},"filters":{"field":"Field","value":"Value","addFilter":"Add filter","clearFilters":"Clear filters","filter":"Filter","operator":"Operator","operators":{"equals":"equals","in":"in","specified":"specified","unspecified":"unspecified","contains":"contains"}},"entities":{"blacklist":{"deleteDialog":{"title":"Delete blacklist","description":"Are you sure?"},"noItems":"No blacklists available","id":"ID","name":"entities.blacklist.name"}}}')},119:function(e,t,a){e.exports=a(241)},240:function(e,t,a){},241:function(e,t,a){"use strict";a.r(t);var n=a(25),r=a(26),i=a(27),c=a(30),o=a(118),l=a(8),s=a(0),u=a.n(s),d=u.a.createContext(null),m=a(117),p=a(31),f=a(24),b=a(247),h=a(255),g=a(253),v=a(248),E=a(246),k=a(67),C=a.n(k),_=a(49),y=a.n(_),O=a(50),T=a.n(O),w=a(51),P=a.n(w),j=a(52),x=a.n(j),N=(a(94),a(95),a(14));var U=function(e,t,a){a({nome:e,cognome:t})},S=a(254),L=a(243),F=a(244),B=a(245),A=function(e){var t=e.isOpen,a=e.onClose,n=e.onConfirm,r=e.user,i=e.className,c=e.textBody;return u.a.createElement(S.a,{isOpen:t,toggle:a,className:i,backdrop:"static"},u.a.createElement(L.a,{toggle:a},u.a.createElement("div",{className:"d-flex"},u.a.createElement("div",null,"Rimuovi utente dalla Blacklist"))),u.a.createElement(F.a,null,u.a.createElement("strong",null,c)),u.a.createElement(B.a,{className:"d-block"},u.a.createElement(E.a,{type:"button",color:"secondary",className:"BlackListModalAddGuest__btn-conferma btn btn-secondary float-right",onClick:function(){n(r),a()}},"Conferma")))};A.defaultProps={user:{},className:""};var D=A,I=a(23),z=a(11),R=a.n(z),M=a(19),K={formUpdate:"blacklist.form.update",formCreate:"blacklist.form.create",formDelete:"blacklist.form.delete"},W="blacklist.select",H="blacklist.add",Y="blacklist.error",V="blacklist.delete",X="widget.toastMessage.setMessage",G="widget.spinner.show",J="widget.spinner.hide",q=a(21),Q=a(108),Z=a(32),$="dashboard/set-loading-blacklist",ee=Object(q.c)({list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"dashboard/set-blacklist":return t.payload.blacklist;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case $:return t.payload.loading;default:return e}},modalSearchUser:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"dashboard/set-modal-users-searched-blacklist":return t.payload.value;default:return e}},pagination:Object(q.c)({list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:"1",pageSize:"10",totalItems:"0"},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"dashboard/set-pagination-list-blacklist":return t.payload.pagination;default:return e}},searched:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:"1",pageSize:"10",totalItems:"0"},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"dashboard/set-pagination-users-searched-blacklist":return t.payload.pagination;default:return e}}}),permissions:function(){return Object(Z.get)(window,"user.permissions",{})},usersSearched:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"dashboard/set-users-searched-blacklist":return t.payload.users;default:return e}},userSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"dashboard/set-user-blacklist":return t.payload.user;default:return e}}}),te=function(){return Object(Z.get)(window,"user.permissions")?Object(Z.get)(window,"user.permissions"):null},ae="dashboard/set-token",ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case ae:return t.payload.token;default:return e}};Object(Z.set)(window,"user.permissions",{viewBlacklist:!0,addUserInBlacklist:!0,editUserInBlacklist:!0});var re=Object(q.c)({blacklist:ee,permissions:te,token:ne}),ie=[Object(q.a)(Q.a)];window.__REDUX_DEVTOOLS_EXTENSION__&&ie.push(window.__REDUX_DEVTOOLS_EXTENSION__());var ce=Object(q.e)(re,q.d.apply(void 0,ie)),oe=function(e){return{type:ae,payload:{token:e}}},le=a(16),se=function(e){return e.token},ue=(Object(le.a)(se,(function(e){return!!e})),function(e,t){var a=new CustomEvent(e,{detail:{payload:t}});window.dispatchEvent(a)}),de=function(e){return function(t){return ue(e,t)}},me=Object({NODE_ENV:"production",PUBLIC_URL:"http://localhost:8081/services/blacklist/resources/static/fe-widget-blacklist",REACT_APP_SERVICE_URL:"http://localhost:8081/services/blacklist",REACT_APP_KEYCLOAK_URL:"http://localhost:9080/auth",REACT_APP_KEYCLOAK_REALM:"jhipster",REACT_APP_KEYCLOAK_CLIENT_ID:"web_app",REACT_APP_CLIENT_ID:"appbuilder",REACT_APP_CLIENT_SECRET:"appbuilder_secret",REACT_APP_DOMAIN:"http://localhost:8081/services/blacklist",REACT_APP_USE_KEYCLOAK:"false"}),pe=me.REACT_APP_DOMAIN,fe=me.REACT_APP_CLIENT_ID,be=me.REACT_APP_CLIENT_SECRET,he=me.REACT_APP_USE_KEYCLOAK,ge={username:"admin",password:"adminadmin",grant_type:"password",client_id:fe,client_secret:be},ve=function(){var e=Object(M.a)(R.a.mark((function e(){var t,a,n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ce.getState(),a=se(t)){e.next=12;break}return e.next=5,fetch("".concat(pe,"/api/oauth/token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic ".concat(btoa("".concat(fe,":").concat(be)))},body:Object.keys(ge).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(ge[e]))})).join("&")});case 5:if(!(n=e.sent).ok){e.next=12;break}return e.next=9,n.json();case 9:return r=e.sent,ce.dispatch(oe(r.access_token)),e.abrupt("return",r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(M.a)(R.a.mark((function e(t,a,n,r){var i,c,o,s,u,d,m;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("false"!==he){e.next=3;break}return e.next=3,ve();case 3:if(i=ce.getState(),!(c=se(i))){e.next=45;break}return o={method:a,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c),"Accept-Language":"it"},body:JSON.stringify(n)},n||delete o.body,e.next=10,fetch("".concat(pe).concat(t),o);case 10:if(s=e.sent,e.prev=11,!s.ok){e.next=21;break}return e.next=15,s.json();case 15:if(!(u=e.sent).errors.length){e.next=18;break}throw u.errors;case 18:if(!r){e.next=20;break}return e.abrupt("return",{payload:u.payload,metaData:u.metaData});case 20:return e.abrupt("return",u.payload);case 21:throw s;case 24:if(e.prev=24,e.t0=e.catch(11),404!==e.t0.status){e.next=29;break}return e.abrupt("return",[]);case 29:return e.next=31,e.t0.json();case 31:d=e.sent,e.t1=e.t0.status,e.next=409===e.t1?35:403===e.t1?36:401===e.t1?39:44;break;case 35:throw d.errors;case 36:return m=d.errors.reduce((function(e,t){return e.push(Object(l.a)(Object(l.a)({},t),{},{type:"error"})),e}),[]),ue(X,m),e.abrupt("break",45);case 39:if("false"!==he){e.next=43;break}return ce.dispatch(oe(null)),e.next=43,ve();case 43:return e.abrupt("break",45);case 44:throw d.errors;case 45:return e.abrupt("return",null);case 46:case"end":return e.stop()}}),e,null,[[11,24]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),ke="/api/blacklist",Ce=function(e){return Ee("".concat(ke,"/").concat(e),"DELETE")},_e=a(249),ye=a(250),Oe=a(251),Te=a(252),we=function(e){var t,a=e.onSearch;return u.a.createElement("div",null,u.a.createElement(b.a,{className:"mb-1"},u.a.createElement(h.a,{addonType:"prepend"},u.a.createElement("i",{className:"fa fa-info-circle TableSearchUtenti__icon-info",id:"toolTipInfo"}),u.a.createElement(g.a,{placement:"left-end",target:"toolTipInfo",innerClassName:"TableSearchUtenti__tooltip"},"Premere invio o sulla lente se la ricerca inserita ha meno di 3 caratteri")),u.a.createElement(v.a,{type:"text",placeholder:"Cerca per cognome",innerRef:function(e){e&&(t=e)},onKeyPress:function(e){"Enter"===e.key&&t&&2===t.value.length&&a(t.value)},onKeyUp:function(){t&&t.value.length>2&&a(t.value)}}),u.a.createElement(h.a,{addonType:"prepend",className:"TableSearchUtenti__icon-container"},u.a.createElement(N.a,{icon:"search",className:"TableSearchUtenti__icon-search",onClick:function(e){e.preventDefault(),t.value.length>=2&&a("".concat(t.value," "))}}))),u.a.createElement(_e.a,{color:"muted"},"Inserisci un minimo di 3 caratteri"))},Pe=function(e){var t=e.text,a=e.page,n=e.onSizePerPageChange;return u.a.createElement("li",{key:t,role:"presentation",className:"dropdown-item",onMouseDown:function(e){e.preventDefault(),n(a)}},t)},je=function(e){var t=e.data,a=e.columns,n=e.page,r=e.sizePerPage,i=e.onTableChange,c=e.totalSize,o=e.loading,l={page:n,sizePerPage:r,totalSize:c,showTotal:!0,paginationTotalRenderer:e.paginationTotalRenderer,sizePerPageOptionRenderer:Pe,sizePerPageList:[{text:"5",value:5},{text:"10",value:10},{text:"Tutti",value:c}]};return u.a.createElement(y.a,{keyField:"codiceFiscale",data:t,columns:a,search:!0},(function(e){return u.a.createElement(ye.a,{fluid:!0,className:"mt-4 TableSearchUtenti"},u.a.createElement(Oe.a,null,u.a.createElement(Te.a,{sm:{size:6,offset:6}},u.a.createElement("div",{className:"TableSearchUtenti__search-bar"},u.a.createElement(we,Object.assign({},e.searchProps,{loading:o}))))),u.a.createElement(Oe.a,null,u.a.createElement(Te.a,{sm:12,lg:12},u.a.createElement("div",{className:"TableSearcUtenti__table-container"},u.a.createElement(T.a,Object.assign({},e.baseProps,{remote:{filter:!0,pagination:!0,sort:!0},bootstrap4:!0,condensed:!0,bordered:!1,classes:"TableSearchUtenti__table",onTableChange:i,pagination:P()(l),noDataIndication:function(){return o?"Caricamento in corso...":""!==e.searchProps.searchText?"La ricerca non ha prodotto nessun risultato":"Attualmente la lista degli utenti \xe8 vuota"},overlay:x()({spinner:!0,background:"rgba(192,192,192,0.3)"})}))))))}))},xe=function(e,t,a){return u.a.createElement("span",{className:"react-bootstrap-table-pagination-total"}," ",e," - ",t," di ",a," elementi totali")},Ne=function(e){return e?"asc"===e?u.a.createElement("span",{className:"TableSearchUtenti__sort-caret"}," ",u.a.createElement(N.a,{icon:"caret-up"})):"desc"===e?u.a.createElement("span",{className:"TableSearchUtenti__sort-caret"}," ",u.a.createElement(N.a,{icon:"caret-down"})):null:u.a.createElement("span",{className:"TableSearchUtenti__sort-caret"}," ",u.a.createElement(N.a,{icon:"caret-up"})," ",u.a.createElement(N.a,{icon:"caret-down"}))},Ue=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).columns=[{text:"Cognome",dataField:"cognome",sort:!0,sortCaret:Ne,headerClasses:"TableSearchUtenti__table-header",align:"center",classes:"text-capitalize"},{text:"Nome",dataField:"nome",sort:!0,sortCaret:Ne,headerClasses:"TableSearchUtenti__table-header",align:"center",classes:"text-capitalize"},{text:"Codice Fiscale",dataField:"codiceFiscale",sort:!0,sortCaret:Ne,headerFormatter:function(e,t,a){var n=a.sortElement;return u.a.createElement("span",null,"Codice",u.a.createElement("br",null),"Fiscale ",n)},headerClasses:"TableSearchUtenti__table-header",align:"center",classes:"text-uppercase"},{text:"Numero Carta Esercito",dataField:"cartaMilitare",sort:!0,sortCaret:Ne,headerFormatter:function(e,t,a){var n=a.sortElement;return u.a.createElement("span",null,"Numero",u.a.createElement("br",null),"Carta Esercito ",n)},formatter:function(e){return e||"-"},headerClasses:"TableSearchUtenti__table-header",align:"center"},{text:"Anagrafica",dataField:"anagrafica",hidden:!0,isDummyField:!0,headerFormatter:function(){return u.a.createElement("span",null,"Visualizza",u.a.createElement("br",null),"Anagrafica")},headerClasses:"TableSearchUtenti__table-header",align:"center",formatter:function(){return u.a.createElement(N.a,{icon:"info-circle",size:"2x",className:"TableSearchUtenti__icon-info",onClick:function(){}})}},{text:"Inserisci in lista",dataField:"inserisciInlista",headerClasses:"TableSearchUtenti__table-header",align:"center",isDummyField:!0,headerFormatter:function(){return u.a.createElement("span",null,"\xa0")},formatter:function(t,a){return u.a.createElement(E.a,{type:"button",color:"secondary",onClick:function(){return r.handleClickAction(a)}},e.actionLabel)}}],r.onTableChange=r.onTableChange.bind(Object(f.a)(r)),r}return Object(r.a)(a,[{key:"componentWillUnmount",value:function(){(0,this.props.onWillUnmount)()}},{key:"onTableChange",value:function(e,t){var a=t.searchText,n=t.page,r=t.sizePerPage,i=t.sortField,c=t.sortOrder,o=this.props.handleTableChange,l="page=".concat(n,"&pageSize=").concat(r,"&").concat("freetextparams=cognome&freetext=").concat(encodeURIComponent(a));"sort"===e&&a&&(l+="&sort=".concat(i,"&direction=").concat(c.toUpperCase())),a&&o(l)}},{key:"handleClickAction",value:function(e){(0,this.props.onClickAction)(e)}},{key:"render",value:function(){var e=this.props,t=e.usersSearched,a=e.pagination,n=e.loading;return u.a.createElement(je,{data:t,columns:this.columns,loading:n,page:parseInt(a.page,10),sizePerPage:parseInt(a.pageSize,10),totalSize:parseInt(a.totalItems,10),paginationTotalRenderer:xe,onTableChange:this.onTableChange})}}]),a}(s.Component);Ue.defaultProps={loading:!1};var Se=Ue,Le=a(29),Fe=(["equals","in"].concat(["specified","unspecified"]),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.filter((function(e){return e.field&&e.operator})).reduce((function(e,t){switch(t.operator){case"specified":return[].concat(Object(I.a)(e),["".concat(encodeURIComponent("".concat(t.field,".specified")),"=true")]);case"unspecified":return[].concat(Object(I.a)(e),["".concat(encodeURIComponent("".concat(t.field,".specified")),"=false")])}return[].concat(Object(I.a)(e),["".concat(encodeURIComponent("".concat(t.field,".").concat(t.operator)),"=").concat(encodeURIComponent(t.value))])}),[]).join("&"):""}),Be=function(){return{headers:new Headers({Authorization:"Bearer ".concat(window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""),"Content-Type":"application/json"})}},Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=!(!t&&!a),r="".concat(t).concat(t?"&":"").concat(a);return"".concat(e).concat(n?"?".concat(r):"")},De=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:if(n=e.sent,r=Object(l.a)({},n.headers.has("X-Total-Count")?{"X-Total-Count":parseInt(n.headers.get("X-Total-Count"),10)}:{}),204!==n.status){e.next=6;break}return e.abrupt("return",{blacklists:""});case 6:if(!(n.status>=200&&n.status<300)){e.next=14;break}return e.next=9,n.json();case 9:e.t1=e.sent,e.t2=r,e.t0={blacklists:e.t1,headers:e.t2},e.next=15;break;case 14:e.t0=Promise.reject(new Error(n.statusText||n.status));case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r,i,c,o,s,u,d;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.filters,r=void 0===n?[]:n,i=a.pagination,c=a.mode,o=Fe(r),s=i?"page=".concat(i.page,"&size=").concat(i.rowsPerPage):"",u=Ae("".concat(t,"/").concat("blacklists").concat("count"===c?"/count":""),o,s),d=Object(l.a)(Object(l.a)({},Be()),{},{method:"GET"}),e.abrupt("return",De(u,d));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ze=function(e){return{type:"dashboard/set-blacklist",payload:{blacklist:e}}},Re=function(e){return{type:"dashboard/set-users-searched-blacklist",payload:{users:e}}},Me=function(e){return{type:"dashboard/set-user-blacklist",payload:{user:e}}},Ke=function(e){return{type:"dashboard/set-pagination-list-blacklist",payload:{pagination:e}}},We=function(e){return{type:"dashboard/set-modal-users-searched-blacklist",payload:{value:e}}},He=function(e){return{type:$,payload:{loading:e}}},Ye=function(e){return function(){var t=Object(M.a)(R.a.mark((function t(a){var n,r,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,ue(G),a(He(!0)),t.next=5,Ie("".concat("http://localhost:8081/services/blacklist","/api"),e);case 5:n=t.sent,r=n&&n.blacklists||[],i=n&&n.metaData||{page:1,pageSize:10,totalItems:0},a(ze(r)),a(Ke(i));case 10:return t.prev=10,ue(J),a(He(!1)),t.finish(10);case 14:case"end":return t.stop()}}),t,null,[[0,,10,14]])})));return function(e){return t.apply(this,arguments)}}()},Ve=function(e){return function(){var t=Object(M.a)(R.a.mark((function t(a){var n,r,i,c;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,ue(G),a(He(!0)),n=e.nome,r=e.cognome,i=e.codiceFiscale,t.next=6,Ee(ke,"POST",e);case 6:return a(Me(e)),"page=1&pageSize=10",t.next=10,a(Ye("page=1&pageSize=10"));case 10:ue(X,{type:"success",message:"L'operazione \xe8 andata a buon fine.",detail:"Inserito: ".concat(n," ").concat(r," - ").concat(i)}),a(We(!1)),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),c=t.t0.reduce((function(e,t){return"EBL002"===t.code&&(t.message="L'utente e' gia' presente nella Blacklist"),e.push(Object(l.a)(Object(l.a)({},t),{},{type:"error"})),e}),[]),ue(X,c);case 18:return t.prev=18,ue(J),a(He(!1)),t.finish(18);case 22:case"end":return t.stop()}}),t,null,[[0,14,18,22]])})));return function(e){return t.apply(this,arguments)}}()},Xe=function(e){return e.blacklist},Ge=Object(le.a)(Xe,(function(e){return e.pagination})),Je=Object(le.a)(Xe,(function(e){return e.permissions})),qe=Object(le.a)(Xe,(function(e){return e.list})),Qe=Object(le.a)(Xe,(function(e){return e.loading})),Ze=Object(le.a)(Xe,(function(e){return e.usersSearched})),$e=(Object(le.a)(Xe,(function(e){return e.userSelected})),Object(le.a)(Ge,(function(e){return e.list}))),et=Object(le.a)(Ge,(function(e){return e.searched})),tt=Object(le.a)(Xe,(function(e){return e.modalSearchUser})),at=(Object(le.a)(Je,(function(e){return e.viewBlacklist})),Object(le.a)(Je,(function(e){return e.addUserInBlacklist}))),nt=(Object(le.a)(Je,(function(e){return e.editUserInBlacklist})),Object(Le.b)((function(e,t){return{usersSearched:Ze(e),actionLabel:t.actionLabel,pagination:et(e),loading:Qe(e)}}),(function(e,t){return{onClickAction:function(e){t.valueParamsActionCall?t.actionCall.apply(t,Object(I.a)(t.valueParamsActionCall).concat([e])):t.actionCall(e)},onWillUnmount:function(){e(Re([]))},handleTableChange:function(t){e(He(!0)),function(e){return e?Ee("".concat("/api/sme/anagrafica","?").concat(e),"GET",null,!0):Ee("".concat("/api/sme/anagrafica"),"GET")}(t).then((function(t){e(Re(t.payload)),e({type:"dashboard/set-pagination-users-searched-blacklist",payload:{pagination:t.metaData}}),e(He(!1))}))}}}))(Se)),rt=function(e){var t=e.isOpen,a=e.onClose,n=e.className,r=e.addUtenteToBlacklist;return u.a.createElement(S.a,{isOpen:t,toggle:a,className:n,backdrop:"static",centered:!0},u.a.createElement(L.a,{toggle:a},u.a.createElement("div",null,u.a.createElement("div",{className:"BlackListModalSearchUser__titolo"}," Inserisci utente in Blacklist"),u.a.createElement("div",{className:"BlackListModalSearchUser__subtitle"},"Inserisci i dati relativi all\u2019utente che si vuole inserire nella blacklist, \xe8 possibile cercare per nome, cognome, n\xb0 carta esercito e/o codice fiscale"))),u.a.createElement(F.a,null,u.a.createElement(nt,{actionLabel:"Conferma",actionCall:r})),u.a.createElement(B.a,{className:"d-block"},u.a.createElement(E.a,{type:"button",color:"secondary",className:"btn btn-secondary float-right",onClick:a},"Chiudi")))};rt.defaultProps={className:"BlackListModalSearchUser"};var it=rt,ct=function(e){var t,a,n=e.onSearch;return u.a.createElement(u.a.Fragment,null,u.a.createElement(b.a,{className:"mb-1"},u.a.createElement(h.a,{addonType:"prepend"},u.a.createElement("i",{className:"fa fa-info-circle BlackListTable__icon-info",id:"toolTipInfo"}),u.a.createElement(g.a,{placement:"left",target:"toolTipInfo",className:"BlackListTable__tooltip",innerClassName:"BlackListTable__tooltip"},"Inserire il cognome e premere invio o la lente per effettuare la ricerca")),u.a.createElement(v.a,{type:"text",placeholder:"Cerca per nome",innerRef:function(e){return t=e},onKeyPress:function(e){"Enter"===e.key&&U(t,a,n)}}),u.a.createElement(v.a,{type:"text",placeholder:"Cerca per cognome",innerRef:function(e){return a=e},onKeyPress:function(e){"Enter"===e.key&&U(t,a,n)}}),u.a.createElement(h.a,{addonType:"prepend"},u.a.createElement("i",{className:"fa fa-search BlackListTable__icon-search",onClick:function(e){e.preventDefault(),U(t,a,n)}}))))},ot=function(e){var t=e.text,a=e.page,n=e.onSizePerPageChange;return u.a.createElement("li",{key:t,role:"presentation",className:"dropdown-item",onMouseDown:function(e){e.preventDefault(),n(a)}},t)},lt=function(e){var t=e.data,a=e.columns,n=e.page,r=e.sizePerPage,i=e.onTableChange,c=e.totalSize,o=e.loading,l=e.paginationTotalRenderer,s=e.onClickButtonAddUser,d={page:n,sizePerPage:r,totalSize:c,showTotal:!0,paginationTotalRenderer:l,sizePerPageOptionRenderer:ot,sizePerPageList:[{text:"5",value:5},{text:"10",value:10},{text:"Tutti",value:c}]};return u.a.createElement(y.a,{keyField:"id",data:t,columns:a,search:!0},(function(e){return u.a.createElement("div",{className:"BlackListTable__container"},u.a.createElement("div",{className:"BlackListTable__search-bar"},u.a.createElement(ct,Object.assign({},e.searchProps,{loading:o}))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-12"},u.a.createElement("div",{className:"BlackListTable__add-button"}," ",u.a.createElement(E.a,{color:"secondary",className:"BlackListPage__btn-insertGuest",onClick:s},"Inserisci utente nella blacklist")))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-12"},u.a.createElement(T.a,Object.assign({},e.baseProps,{remote:{filter:!0,pagination:!0,sort:!0},bootstrap4:!0,condensed:!0,bordered:!1,classes:"BlackListTable__table",onTableChange:i,pagination:P()(d),noDataIndication:function(){return o?"Caricamento in corso...":""!==e.searchProps.searchText?"La ricerca non ha prodotto nessun risultato":"Attualmente la Blacklist e' vuota"},overlay:x()({spinner:!0,background:"rgba(192,192,192,0.3)"})})))))}))},st=function(e,t,a){return u.a.createElement("span",{className:"react-bootstrapTable-pagination-total"}," ",e," - ",t," di ",a," elementi totali")},ut=function(e,t){return e?"asc"===e?u.a.createElement("span",{className:t.BlackListTable__sortCaret}," ",u.a.createElement(N.a,{icon:"caret-up"})):"desc"===e?u.a.createElement("span",{className:t.BlackListTable__sortCaret}," ",u.a.createElement(N.a,{icon:"caret-down"})):null:u.a.createElement("span",{className:t.BlackListTable__sortCaret}," ",u.a.createElement(N.a,{icon:"caret-up"})," ",u.a.createElement(N.a,{icon:"caret-down"}))},dt=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={modalRemoveUtente:!1,modalAddOspite:!1,rowSelected:null},r.toggleModalHandleOspite=r.toggleModalHandleOspite.bind(Object(f.a)(r)),r.onTableChange=r.onTableChange.bind(Object(f.a)(r)),r.columns=[{text:"Stato",dataField:"definitiva",formatter:function(e){return e?"Definitiva":"Temporanea"},sort:!0,sortCaret:ut,headerClasses:"BlackListTable__table-header",align:"center"},{text:"Cognome",dataField:"cognome",sort:!0,sortCaret:ut,headerClasses:"BlackListTable__table-header",align:"center",classes:"text-capitalize"},{text:"Nome",dataField:"nome",sort:!0,sortCaret:ut,headerClasses:"BlackListTable__table-header",align:"center",classes:"text-capitalize"},{text:"Codice Fiscale",dataField:"codiceFiscale",sort:!0,sortCaret:ut,headerFormatter:function(e,t,a){var n=a.sortElement;return u.a.createElement("span",null,"Codice",u.a.createElement("br",null),"Fiscale ",n)},headerClasses:"BlackListTable__table-header",align:"center",classes:"text-uppercase"},{text:"Numero Carta Esercito",dataField:"cartaMilitare",sort:!0,sortCaret:ut,headerFormatter:function(e,t,a){var n=a.sortElement;return u.a.createElement("span",null,"Numero",u.a.createElement("br",null),"Carta Esercito",n)},formatter:function(e){return e||"-"},headerClasses:"BlackListTable__table-header",align:"center"},{text:"Data inserimento",dataField:"dataInserimento",formatter:function(e){return C()(e).format("DD/MM/YYYY")},sort:!0,sortCaret:ut,headerFormatter:function(e,t,a){var n=a.sortElement;return u.a.createElement("span",null,"Data",u.a.createElement("br",null),"inserimento ",n)},headerClasses:"BlackListTable__table-header",align:"center"},{text:"Data scadenza",dataField:"dataScadenza",formatter:function(e){return e?C()(e).format("DD/MM/YYYY"):"-"},sort:!0,sortCaret:ut,headerFormatter:function(e,t,a){var n=a.sortElement;return u.a.createElement("span",null,"Data",u.a.createElement("br",null),"scadenza ",n)},headerClasses:"BlackListTable__table-header",align:"center"},{text:"Info Utente",dataField:"infoUtente",hidden:!0,isDummyField:!0,headerFormatter:function(e,t,a){var n=a.sortElement;return u.a.createElement("span",null,"Info",u.a.createElement("br",null),"utente",n)},headerClasses:"BlackListTable__table-header",align:"center",formatter:function(){return u.a.createElement(N.a,{icon:"info-circle",className:"BlackListTable__icon-info"})}},{text:"Rimuovi Utente",dataField:"rimuoviUtente",isDummyField:!0,headerFormatter:function(e,t,a){var n=a.sortElement;return u.a.createElement("span",null,"Rimuovi",u.a.createElement("br",null),"utente ",n)},headerClasses:"BlackListTable__table-header",align:"center",formatter:function(e,t){return u.a.createElement(N.a,{icon:"trash",className:"BlackListTable__table-trash",role:"button",onClick:function(){return r.toggleModalHandleOspite("modalRemoveUtente",t)}})}},{text:"Inserisci blacklist Definitiva",dataField:"azioni",headerClasses:"BlackListTable__table-header",align:"center",isDummyField:!0,headerFormatter:function(e,t,a){var n=a.sortElement;return u.a.createElement("span",null,"Inserisci in",u.a.createElement("br",null),"blacklist definitiva ",n)},formatter:function(e,t){return t.definitiva?null:u.a.createElement(E.a,{type:"button",color:"secondary",onClick:function(){return r.toggleModalHandleOspite("modalAddOspite",t)}},"Inserisci")}}],r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.onDidMount)()}},{key:"componentWillUnmount",value:function(){(0,this.props.onWillUnmount)()}},{key:"onTableChange",value:function(e,t){var a=t.searchText,n=t.page,r=t.sizePerPage,i=t.sortField,c=t.sortOrder,o=this.props.handleTableChange,l="page=".concat(n,"&pageSize=").concat(r,"&").concat("searchText=").concat(encodeURIComponent(a));return"sort"===e&&(l+="&sort=".concat(i,"&direction=").concat(c.toUpperCase())),o(l)}},{key:"toggleModalHandleOspite",value:function(e,t){this.setState((function(a){var n;return n={},Object(p.a)(n,e,!a[e]),Object(p.a)(n,"rowSelected",t),n}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.blacklist,n=t.onClickRemoveUtente,r=t.setUtenteBlacklistDefinitiva,i=t.addUtenteToBlacklist,c=t.pagination,o=t.loading,l=t.isShowModalSearchUser,s=t.toggleModalUsersSearched,d=this.state,m=d.rowSelected,p=d.modalRemoveUtente,f=d.modalAddOspite;return u.a.createElement("div",{className:"px-0 BlackListTable"},u.a.createElement("div",{className:"row mx-0"},u.a.createElement("div",{className:"col-12 px-0"},u.a.createElement(lt,{data:a,columns:this.columns,loading:o,page:parseInt(c.page,10),sizePerPage:parseInt(c.pageSize,10),totalSize:parseInt(c.totalItems,10),paginationTotalRenderer:st,onTableChange:this.onTableChange,onClickButtonAddUser:function(){return s(!0)}}))),u.a.createElement(it,{isOpen:l,onClose:function(){return s(!1)},addUtenteToBlacklist:i}),u.a.createElement(D,{isOpen:p,onClose:function(){return e.toggleModalHandleOspite("modalRemoveUtente")},user:m,onConfirm:n,textBody:"Sei sicuro di volere rimuovere l'utente selezionato dalla blacklist?"}),u.a.createElement(D,{isOpen:f,onClose:function(){return e.toggleModalHandleOspite("modalAddOspite")},user:m,onConfirm:r,textBody:"Confermi il passaggio dell'utente dalla blacklist temporanea alla definitiva?"}))}}]),a}(s.Component);dt.defaultProps={loading:!1};var mt=dt,pt=Object(Le.b)((function(e){return{blacklist:qe(e),pagination:$e(e),isShowModalSearchUser:tt(e),loading:Qe(e)}}),(function(e){return{onDidMount:function(){e(Ye({pagination:{page:1,rowsPerPage:10,sortBy:"codiceFiscale"},filters:[]}))},onWillUnmount:function(){e(ze([]))},onClickRemoveUtente:function(t){var a;e((a=t,function(){var e=Object(M.a)(R.a.mark((function e(t){var n,r,i,c,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.id,r=a.nome,i=a.cognome,c=a.codiceFiscale,ue(G),t(He(!0)),e.next=6,Ce(n);case 6:t(Me(a)),t(Ye("page=1&pageSize=10&sort=codiceFiscale")),ue(X,{type:"success",message:"L'operazione \xe8 andata a buon fine.",detail:"Rimosso: ".concat(r," ").concat(i," - ").concat(c)}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),o=e.t0.reduce((function(e,t){return e.push(Object(l.a)(Object(l.a)({},t),{},{type:"error"})),e}),[]),ue(X,o);case 15:return e.prev=15,ue(J),t(He(!1)),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[0,11,15,19]])})));return function(t){return e.apply(this,arguments)}}()))},setUtenteBlacklistDefinitiva:function(t){var a;e((a=t,function(){var e=Object(M.a)(R.a.mark((function e(t){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={idBlacklist:a.id},ue(G),t(He(!0)),e.next=6,Ee("/api/blacklist/set-stato-definitiva","POST",n);case 6:ue(X,{type:"success",message:"L'operazione \xe8 andata a buon fine."}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r=e.t0.reduce((function(e,t){return e.push(Object(l.a)(Object(l.a)({},t),{},{type:"error"})),e}),[]),ue(X,r);case 13:return e.prev=13,ue(J),t(He(!1)),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[0,9,13,17]])})));return function(t){return e.apply(this,arguments)}}()))},handleTableChange:function(t){e(Ye({pagination:{page:1,rowsPerPage:10,sortBy:"codiceFiscale"},filters:[]}))},addUtenteToBlacklist:function(t){var a=t.nome,n=t.cognome,r=t.codiceFiscale;e(Ve({codiceFiscale:r,nome:a,cognome:n,definitiva:!0,motivo:""}))},toggleModalUsersSearched:function(t){return e(We(t))}}}))(mt),ft=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={modalOpen:!0},r.handleModal=r.handleModal.bind(Object(f.a)(r)),r}return Object(r.a)(a,[{key:"handleModal",value:function(){this.setState((function(e){return{modalOpen:!e.modalOpen}}));var e=this.props.callback;e&&e()}},{key:"render",value:function(){var e=this.props,t=e.permission,a=e.children,n=this.state.modalOpen;return t?a:u.a.createElement("div",{className:"ReservationWizard__modal-cancellation"},u.a.createElement(S.a,{backdrop:"static",autoFocus:!0,centered:!0,isOpen:n,className:"ReservationWizard__modal-permissions"},u.a.createElement(L.a,{className:"ReservationWizard__modal-title"},u.a.createElement("div",{className:"d-flex"},u.a.createElement("div",{className:""},u.a.createElement(N.a,{icon:"info-circle",size:"2x"})),u.a.createElement("div",{className:"ml-3"},"Attenzione"))),u.a.createElement(F.a,{className:"ReservationWizard__modal-content-container"},u.a.createElement("div",{className:"ReservationWizard__modal-content text-center mb-4"},u.a.createElement("h5",null,"Utente non abilitato."))),u.a.createElement(B.a,null,u.a.createElement(E.a,{color:"secondary",onClick:this.handleModal},"Chiudi"))))}}]),a}(s.Component);ft.defaultProps={callback:null};var bt=ft,ht=function(){return u.a.createElement("div",null,u.a.createElement("div",{className:"BlackListPage__titolo"},"Blacklist"),u.a.createElement("div",{className:"BlackListPage__subtitle"},"Elenco degli utenti in blacklist"))},gt=function(){return u.a.createElement("div",null,u.a.createElement("div",{className:"BlackListPage__titolo"}," Inserisci utente in Blacklist "),u.a.createElement("div",{className:"BlackListPage__subtitle"},"Inserisci i dati relativi all\u2019utente che si vuole inserire nella blacklist, \xe8 possibile cercare per nome, cognome, n\xb0 carta esercito e/o codice fiscale"))},vt=function(e){var t=e.permission,a=e.initPage,n=e.addUtenteToBlacklist,r=Object(s.useState)(a||"home"),i=Object(m.a)(r,2),c=i[0],o=i[1];return u.a.createElement(bt,{permission:t},u.a.createElement("div",{className:"BlackListPage"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-12 mt-3"},"home"===c&&u.a.createElement(ht,{setPage:function(e){o(e)}}),"inserisciUtente"===c&&u.a.createElement(gt,null))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-12"},"home"===c&&u.a.createElement(pt,null),"inserisciUtente"===c&&u.a.createElement(nt,{emptyLoad:!0,actionLabel:"Conferma",actionCall:n,linkPagination:"/blacklist/utente"})))))};vt.defaultProps={initPage:"home"};var Et=vt,kt=Object(Le.b)((function(e,t){return{initPage:t.initPage,permission:at(e)}}),(function(e){return{addUtenteToBlacklist:function(t){var a=t.nome,n=t.cognome,r=t.codiceFiscale;e(Ve({codiceFiscale:r,nome:a,cognome:n,definitiva:!0,motivo:""}))}}}))(Et),Ct=a(72),_t=a(116),yt={it:a(114),en:a(115)},Ot=Object.keys(yt).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(p.a)({},t,Object(p.a)({},"translation",yt[t])))}),{}),Tt=(Ct.a.t,function(e){!function(e,t){Ct.a.use(_t.a).init({defaultNs:"translation",interpolation:{escapeValue:!1},resources:Ot,lng:e||t,fallbackLng:t,react:{useSuspense:!1}})}(e,"en")}),wt=a(17),Pt=a.n(wt),jt=function(){return window&&window.entando&&window.entando.keycloak&&Object(l.a)(Object(l.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},xt={hidden:"hidden",locale:"locale",paginationMode:"pagination-mode",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url"},Nt=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).keycloak=jt(),e.onAdd=de(H),e.onError=de(Y),e.onSelect=de(W),e.onDelete=de(V),e.reactRootRef=u.a.createRef(),e}return Object(r.a)(a,[{key:"attributeChangedCallback",value:function(e,t,a){if(this.container&&t!==a){if(!Object.values(xt).includes(e))throw new Error("Untracked changed attribute: ".concat(e));e===xt.disableDefaultEventHandler&&this.onToggleDisableDefaultEvent(),this.render()}}},{key:"connectedCallback",value:function(){var e,t,a=this;this.mountPoint=document.createElement("div"),this.appendChild(this.mountPoint),this.keycloak=Object(l.a)(Object(l.a)({},jt()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=(e="keycloak",t=function(){a.keycloak=Object(l.a)(Object(l.a)({},jt()),{},{initialized:!0}),a.render()},window.addEventListener(e,t),function(){window.removeEventListener(e,t)}),this.render()}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromWidgetEvents&&this.unsubscribeFromWidgetEvents(),this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()}},{key:"defaultWidgetEventHandler",value:function(){var e=this;return function(t){var a=function(e){var t=e.type,a=e.detail;return{type:t,payload:a.payload,error:a.error,meta:a.meta}}(t);e.reactRootRef.current.dispatch(a)}}},{key:"onToggleDisableDefaultEvent",value:function(){var e,t,a="true"===this.getAttribute(xt.disableDefaultEventHandler);if(a!==this.defaultEventHandlerDisabled){if(a)this.unsubscribeFromWidgetEvents&&this.unsubscribeFromWidgetEvents(),this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent();else{var n=this.defaultWidgetEventHandler();this.unsubscribeFromWidgetEvents=(e=Object.values(K),t=n,e.forEach((function(e){return window.addEventListener(e,t)})),function(){e.forEach((function(e){return window.removeEventListener(e,t)}))})}this.defaultEventHandlerDisabled=a}}},{key:"render",value:function(){if(!("true"===this.getAttribute(xt.hidden))){var e=this.getAttribute(xt.locale);Tt(e),Pt.a.render(u.a.createElement(d.Provider,{value:this.keycloak},u.a.createElement(Le.a,{store:ce},u.a.createElement(kt,null))),this.mountPoint)}}}],[{key:"observedAttributes",get:function(){return Object.values(xt)}}]),a}(Object(o.a)(HTMLElement));customElements.define("blacklist-widget",Nt);a(235);var Ut=a(43),St=a(12),Lt={faCalendar:St.e,faCalendarAlt:St.f,faStore:St.p,faUserCircle:St.t,faBars:St.c,faInfoCircle:St.m,faTrash:St.s,faCheck:St.i,faTimesCircle:St.r,faTimes:St.q,faAngleUp:St.b,faAngleDown:St.a,faCaretDown:St.g,faCaretUp:St.h,faFileAlt:St.l,faSearch:St.o,faBell:St.d,faEnvelope:St.j,faEnvelopeOpen:St.k,faPen:St.n};Ut.b.add(Lt);a(236),a(237),a(240)}},[[119,1,2]]]);
//# sourceMappingURL=main.44e19547.chunk.js.map